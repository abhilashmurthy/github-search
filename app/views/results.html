<div ng-controller="ResultsCtrl as resultsCtrl">
	<div ng-if="sortKey && sortBucketValues.length > 0">
		<section
			infinite-scroll="github.fetchResults()"
			infinite-scroll-disabled="github.isLoadingNextPage()"
			infinite-scroll-distance="infiniteScrollDistance"
			infinite-scroll-immediate-check="false">
			<div ng-repeat="bucketValue in sortBucketValues">
				<md-subheader class="md-primary">{{bucketValue ? bucketValue : 'Unspecified'}}</md-subheader>
				<md-list layout-padding>
					<div class="result"
						ng-repeat="repo in github.getRepos() | filter:bucketMatcher(bucketValue, sortType)">
						<md-list-item class="md-2-line md-clickable"
							md-ink-ripple="#bbb"
							ng-click="showDialog(repo)">
							<img ng-src="{{repo.owner.avatar_url}}" class="md-avatar" alt="{{repo.owner.login}}">
							<div class="md-list-item-text">
								<h3>{{repo.full_name}}</h3>
							</div>
						</md-list-item>
						<md-divider class="result"></md-divider>
					</div>
				</md-list>
			</div>
		</section>
	</div>
	<div ng-if="sortBucketValues.length == 0">
		<md-content>
			<md-list
					infinite-scroll="github.fetchResults()"
					infinite-scroll-disabled="github.isLoadingNextPage()"
					infinite-scroll-distance="infiniteScrollDistance"
					infinite-scroll-immediate-check="false">
					<div class="result"
						ng-repeat="repo in github.getRepos() | orderBy:sortKey">
						<md-list-item class="md-2-line md-clickable"
							md-ink-ripple="#bbb"
							ng-click="showDialog(repo)">
							<img ng-src="{{repo.owner.avatar_url}}" class="md-avatar" alt="{{repo.owner.login}}">
							<div class="md-list-item-text">
								<h3>{{repo.full_name}}</h3>
							</div>
						</md-list-item>
						<md-divider class="result"></md-divider>
					</div>
			</md-list>
		</md-content>
	</div>
</div>